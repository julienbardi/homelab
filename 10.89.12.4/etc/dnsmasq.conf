# dnsmasq.conf
# after changes deploy, apply and restart
#   sudo cp /home/julie/homelab/10.89.12.4/etc/dnsmasq.conf /etc/;sudo chown root:root /etc/dnsmasq.conf;sudo chmod 0644 /etc/dnsmasq.conf;ls -l /etc/dnsmasq.conf
#   sudo systemctl enable dnsmasq;sudo systemctl restart dnsmasq;sudo systemctl status dnsmasq;sudo journalctl -u dnsmasq -f
# validate on Windows clients in PowerShell with
#   ipconfig /release6;ipconfig /renew6;Get-DnsClientServerAddress -AddressFamily IPv6
# 
# Listen only on your LAN/NAS interfaces
interface=bridge0
interface=wg1
interface=wg2
interface=wg3
interface=wg4
interface=wg5
interface=wg6
interface=wg7

# Disable dnsmasq's own DNS if you only want Unbound
port=0

# IPv4 DHCP ranges (adjust per subnet)
dhcp-range=10.89.12.100,10.89.12.200,12h
dhcp-range=10.1.0.100,10.1.0.200,12h   # wg1
dhcp-range=10.3.0.100,10.3.0.200,12h   # wg3
dhcp-range=10.5.0.100,10.5.0.200,12h   # wg5
dhcp-range=10.7.0.100,10.7.0.200,12h   # wg7

# IPv6 DHCP ranges (minimal, just to trigger replies)
dhcp-range=::100,::200,constructor:bridge0,ra-stateless,ra-names
dhcp-range=::100,::200,constructor:wg1,ra-stateless,ra-names
dhcp-range=::100,::200,constructor:wg3,ra-stateless,ra-names
dhcp-range=::100,::200,constructor:wg5,ra-stateless,ra-names
dhcp-range=::100,::200,constructor:wg7,ra-stateless,ra-names

# Advertise Unbound as DNS (NAS ULA + ISP fallback)
dhcp-option=option6:dns-server,[fd10:8912:0:0::1],[2a01:8b81:4800:9c00::1]
dhcp-option=option:dns-server,10.89.12.4,2a01:8b81:4800:9c00::1
