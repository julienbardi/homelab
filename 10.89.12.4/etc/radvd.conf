# radvd.conf
# LAN advertisement (optional, keep if you want ULA on bridge0)
# after changes deploy, apply and restart
# sudo cp /home/julie/homelab/10.89.12.4/etc/radvd.conf /etc/;sudo chown root:root /etc/radvd.conf;sudo chmod 0644 /etc/radvd.conf;ls -l /etc/radvd.conf
# sudo systemctl enable radvd;sudo systemctl restart radvd;sudo systemctl status radvd;sudo journalctl -u radvd -f

interface bridge0
{
    AdvSendAdvert on;
    MinRtrAdvInterval 30;
    MaxRtrAdvInterval 100;
    IgnoreIfMissing on;

    # Match upstream RA flags for coexistence, there is "other config" (DNS via DHCPv6)
    AdvManagedFlag off;
    AdvOtherConfigFlag on;

    prefix fd10:8912:0:0::/64 {
        AdvOnLink on;
        AdvAutonomous on;
        AdvValidLifetime 86400;
        AdvPreferredLifetime 14400;
    };

    # advertise both NAS DNS/local resolver and ISP resolver (stable within WWZ Telekom’s allocation)
    # This way, clients automatically get redundancy: they’ll use your NAS first, but if it’s offline,
    # they can still resolve via the ISP’s DNS.
    RDNSS fd10:8912:0:0::1 2a01:8b81:4800:9c00::1 {    
        AdvRDNSSLifetime 600;
    };
};

# wg0 to enabled yet, would use prefix fd10:8912:0:10::/64

# wg1 – LAN-enabled tunnel
interface wg1
{
    AdvSendAdvert on;
    MinRtrAdvInterval 30;
    MaxRtrAdvInterval 100;
    IgnoreIfMissing on;

    prefix fd10:8912:0:11::/64 {
        AdvOnLink on;
        AdvAutonomous on;
    };
    # Trusted peers: advertise NAS + ISP DNS
    RDNSS fd10:8912:0:0::1 2a01:8b81:4800:9c00::1 {
        AdvRDNSSLifetime 600;
    };
};

# wg2 – internet-only tunnel
interface wg2
{
    AdvSendAdvert on;
    MinRtrAdvInterval 30;
    MaxRtrAdvInterval 100;
    IgnoreIfMissing on;

    prefix fd10:8912:0:12::/64 {
        AdvOnLink on;
        AdvAutonomous on;
    };
    # Only advertise ISP DNS
    RDNSS 2a01:8b81:4800:9c00::1 {
        AdvRDNSSLifetime 600;
    };
};

# wg3 – LAN-enabled tunnel
interface wg3
{
    AdvSendAdvert on;
    MinRtrAdvInterval 30;
    MaxRtrAdvInterval 100;
    IgnoreIfMissing on;

    prefix fd10:8912:0:13::/64 {
        AdvOnLink on;
        AdvAutonomous on;
    };
    # Trusted peers: advertise NAS + ISP DNS
    RDNSS fd10:8912:0:0::1 2a01:8b81:4800:9c00::1 {
        AdvRDNSSLifetime 600;
    };
};

# wg4 – internet-only tunnel
interface wg4
{
    AdvSendAdvert on;
    MinRtrAdvInterval 30;
    MaxRtrAdvInterval 100;
    IgnoreIfMissing on;

    prefix fd10:8912:0:14::/64 {
        AdvOnLink on;
        AdvAutonomous on;
    };

    RDNSS 2a01:8b81:4800:9c00::1 {
        AdvRDNSSLifetime 600;
    };
};

# wg5 – LAN-enabled tunnel
interface wg5
{
    AdvSendAdvert on;
    MinRtrAdvInterval 30;
    MaxRtrAdvInterval 100;
    IgnoreIfMissing on;

    prefix fd10:8912:0:15::/64 {
        AdvOnLink on;
        AdvAutonomous on;
    };
    # Trusted peers: advertise NAS + ISP DNS
    RDNSS fd10:8912:0:0::1 2a01:8b81:4800:9c00::1 {
        AdvRDNSSLifetime 600;
    };
};

# wg6 – internet-only tunnel
interface wg6
{
    AdvSendAdvert on;
    MinRtrAdvInterval 30;
    MaxRtrAdvInterval 100;
    IgnoreIfMissing on;

    prefix fd10:8912:0:16::/64 {
        AdvOnLink on;
        AdvAutonomous on;
    };

    RDNSS 2a01:8b81:4800:9c00::1 {
        AdvRDNSSLifetime 600;
    };
};

# wg7 – LAN-enabled tunnel
interface wg7
{
    AdvSendAdvert on;
    MinRtrAdvInterval 30;
    MaxRtrAdvInterval 100;
    IgnoreIfMissing on;

    prefix fd10:8912:0:17::/64 {
        AdvOnLink on;
        AdvAutonomous on;
    };
    # Trusted peers: advertise NAS + ISP DNS
    RDNSS fd10:8912:0:0::1 2a01:8b81:4800:9c00::1 {
        AdvRDNSSLifetime 600;
    };
};
