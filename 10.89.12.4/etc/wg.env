# /etc/wg.env - WireGuard environment (Option B: explicit, Manual ULA)
# Secure the file after placing it: sudo chmod 600 /etc/wg.env

# Paths
WG_BASE_DIR="/etc/wireguard"
WG_CLIENT_DIR="/root/wg-clients"
WG_KEY_DIR="${WG_BASE_DIR}/keys"
WG_BIN_DIR="/usr/local/bin"
NDPPD_CONF="/etc/ndppd.conf"
LOG="/var/log/wg-scripts.log"

# Commands (resolved at runtime if not present)
IPTABLES="$(command -v iptables || echo /sbin/iptables)"
IP6TABLES="$(command -v ip6tables || echo /sbin/ip6tables)"
WG="$(command -v wg || echo /usr/bin/wg)"
WG_QUICK="$(command -v wg-quick || echo /usr/bin/wg-quick)"
QRENCODE="$(command -v qrencode || true)"

# Network and endpoint
WG_IF_PREFIX="wg"                # interfaces: wg0 .. wg7
BRIDGE_IF="bridge0"              # LAN bridge interface on NAS
ENDPOINT_HOST="bardi.ch"         # public endpoint for clients (ASUS must forward ports to NAS 10.89.12.4)

# DNS (WireGuard clients will use the NAS IPv4 DNS directly)
DNS_IPV4="10.89.12.4"
DNS_IPV6=""                      # intentionally empty: LAN RDNSS is handled by the router (ASUS)

# IPv6 guidance (informational only)
SERVER_IPV6_GLOBAL="2a01:8b81:4800:9c00::/64"  # global PD advertised on LAN (ndppd will proxy this /64)
# Do NOT set SERVER_IPV6_ADDR because the NAS bridge0 will remain on Manual ULA; scripts should detect runtime addr if needed.
SERVER_IPV6_ADDR=""

# IPv4 allocation scheme: each wgN uses 10.N.0.0/24 (N = 0..7)
CLIENT_IPV4_START=100            # dynamic client allocation start (per /24)
CLIENT_IPV4_END=199              # dynamic client allocation end (per /24)

# WireGuard ports per interface (ASUS must forward these UDP ports to NAS 10.89.12.4)
WG_PORT_WG0=51820
WG_PORT_WG1=51821
WG_PORT_WG2=51822
WG_PORT_WG3=51823
WG_PORT_WG4=51824
WG_PORT_WG5=51825
WG_PORT_WG6=51826
WG_PORT_WG7=51827

# IPv6 client block policy (informational)
# wg0 clients: ::100–::1ff, wg1: ::200–::2ff, ... wg7: ::800–::8ff inside SERVER_IPV6_GLOBAL
# Scripts must generate explicit /128s for peers in that scheme.

# Safety
UMASK=077

